global:
  tlsDisable: false

ui:
  enabled: true

server:
  extraVolumes:
  - type: secret
    name: demo-vault
  - type: secret
    name: tls-test-server
  - type: secret
    name: tls-test-client

  extraEnvironmentVar:
    VAULT_CACERT=/vault/userconfig/tls-test-server/ca.crt
    VAULT_LICENSE=02MV4UU43BK5HGYYTOJZWFQMTMNNEWU33JLFKFKM2ZPJCTKWKXLF2E26SJGFGVGMD2JYZFKM2MK5GTITRSJV2E26TENRHEIWTIJVDVCMKZKRHGSSLJO5UVSM2WPJSEOOLULJMEUZTBK5IWST3JJJVE6RCRGRNEOVTILJBTA6KPIRTXUTCUM4YFUVDHORGUI2ZTJZUTC2C2KRTTETLKMRVE4R2NGJGUI23JJRBUU4DCNZHDAWKXPBZVSWCSOBRDENLGMFLVC2KPNFEXCSLJO5UWCWCOPJSFOVTGMRDWY5C2KNETMSLKJF3U22SFORGVIQLUJVVGQVKNIRRTMTSUIU3E2VDHOVHHUVJSJVVEK6SNIRRXSV3JJFZUS3SOGBMVQSRQLAZVE4DCK5KWST3JJF4U2RCJPBGFIRLXJRKESNCWIRAXOT3KIF3U62SBO5LWSSLTJFWVMNDDI5WHSWKYKJYGEMRVMZSEO3DULJJUSNSJNJEXOTLKJF2E2VCBORGWU2CVJVVE2NSOKRVTMTSUNN2U6VDLGVLWSSLTJFXFE3DDNUYXAYTNIYYGCVZZOVMDGUTQMJLVK2KPNFEXSTKEJF4UYVCFO5GFISJUKZCES6SPNJKTKT3KKU2UY2TLGVHVM33JJRBUU53DNU4WWZCXJYYES2TPNFSG2RRRMJEFC2KMINFG2YSHIZXGG6KJGZSXSSTUMIZFEMLCI5LHUSLKOBRES3JRGFREQUTQJRLVE2SMLBHGUWKXPBWES2LXNFNDEOJSLJMEU5KZK42WUWSTGF3WEMTYOBMTG23JJRBUU2C2JBNGQYTNJZWFUQZRNNMVQUTIJRMEE6LCGNJGYWJTKJYGEMRUNFMFQMJZFZMEE6LJKVXXE22TNM3WG3LBKQVWC3CKK52XGK32OZSXAWBSKE3UYTCOMZZWWUTPKVKGOL3CI5DHKSRUMZZWWWDYME3EISZSNJRHQQZWI53EMK3NGRWUOULLK4YWQQKGNZKFMK22IFFDCZCBNNRWCNDEKYYDGMZYKB3W2VTMMF3EUUBUOBFHQSKJHFCDMVKGJRKWCVSQNJVVOSTUMNCDM4DBNQ3G6T3GI5XEWMT2KBFUUUTNI5EFMM3FLJ3XCRTFFNXTO2ZPOMVUCVCONBIFUZ2TF5FVMWLHF5FSW3CHKB3UYN3KIJ4ESN2HJ5QWWNSVMFUWCSDPMVVTAUSUN43TERCRHU6Q

  image:
    repository: vault
    tag: 1.10.3

  standalone:
    enabled: true
    config: |
      ui = true
      listener "tcp" {
        address = "[::]:8200"
        cluster_address = "[::]:8201"
        tls_cert_file = "/vault/userconfig/tls-test-server/server.crt"
        tls_key_file = "/vault/userconfig/tls-test-server/server.key"
      }

      storage "file" {
        path = "/vault/data"
      }
     

  readinessProbe:
    path: "/v1/sys/health?standbyok=true&sealedcode=204&uninitcode=204"

  postStart:
  - "/bin/sh"
  - "-c"
  - "sleep 5 && cp /vault/userconfig/demo-vault/bootstrap.sh /tmp/bootstrap.sh && chmod +x /tmp/bootstrap.sh && /tmp/bootstrap.sh"

csi:
  enabled: true

  volumes:
  - name: tls
    secret:
      secretName: tls-test-client

  volumeMounts:
   - name: tls
     mountPath: "/vault/tls"
     readOnly: true
